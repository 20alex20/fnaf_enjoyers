<!DOCTYPE html>
<html>
<head>
  <title>Comment Section</title>
  <style>
    .comment {
      margin-bottom: 10px;
      padding: 10px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
   
     
      
    }

    .reply {
      margin-top: 5px;
      padding: 5px;
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      margin-left: 20px;
    }

    .nested-reply {
      margin-left: 40px;
    }

    .reply-button {
      margin-left: 5px;
    }

    .user-avatar {
      
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-image:url(images/icons8-маска-анонимуса-100.png);
      background-size: 50px auto;
      margin-right: 10px;
    }

    .user-name {
      font-weight: bold;
      margin-top: 0px;
    
      margin-left: 70px;

    }
    .reply-menu {
  position: absolute;
  top: 100%;
  right: 0;
  display: none;
  background-color: #f9f9f9;
  border: 1px solid #ccc;
  padding: 5px;
}

.reply:hover .reply-menu {
  display: block;
}
  </style>
</head>
<body>
  <h1>Комментарии</h1>
  <form id="comment-form">
    <textarea id="comment-input" rows="4" cols="50" placeholder="Enter your comment"></textarea><br>
    <button type="submit">Отправить</button>
  </form>
  <div id="comments">
   
  </div>



  <script>
       function handleReply(event) {
      event.preventDefault();
      var replyInput = event.target.querySelector("textarea");
      var replyText = replyInput.value.trim();
      if (replyText !== "") {
        var replyElement = document.createElement("div");
        replyElement.className = "reply";

        var avatarElement = document.createElement("div");
        avatarElement.className = "user-avatar";
        replyElement.appendChild(avatarElement);

        var replyContent = document.createElement("div");
        replyContent.className = "reply-content";

        var nameElement = document.createElement("div");
        nameElement.className = "user-name";
        nameElement.textContent = "Анон";
        replyContent.appendChild(nameElement);

        var replyTextElement = document.createElement("p");
        replyTextElement.className = "reply-text";
        replyTextElement.textContent = replyText;
        replyContent.appendChild(replyTextElement);

        replyElement.appendChild(replyContent);

        var deleteButton = document.createElement("button");
        deleteButton.textContent = "Удалить";
        deleteButton.addEventListener("click", function() {
          replyElement.remove();
        });
        replyElement.appendChild(deleteButton);

        var replyForm = document.createElement("form");
        replyForm.className = "reply-form";
        var nestedReplyInput = document.createElement("textarea");
        nestedReplyInput.rows = "2";
        nestedReplyInput.cols = "40";
        nestedReplyInput.placeholder = "Reply to this comment";
        var nestedReplyButton = document.createElement("button");
        nestedReplyButton.type = "submit";
        nestedReplyButton.textContent = "Ответить";
        replyForm.appendChild(nestedReplyInput);
        replyForm.appendChild(nestedReplyButton);
        replyForm.addEventListener("submit", handleReply);
        replyElement.appendChild(replyForm);

        var parentComment = event.target.closest(".comment");
        if (parentComment) {
          var replyContainer = parentComment.querySelector(".reply-container");
          if (!replyContainer) {
            replyContainer = document.createElement("div");
            replyContainer.className = "reply-container";
            parentComment.appendChild(replyContainer);
          }
          replyContainer.appendChild(replyElement);
        }

        replyInput.value = "";
      }
    }

    function handleSubmit(event) {
      event.preventDefault();
      var commentInput = document.getElementById("comment-input");
      var commentText = commentInput.value.trim();

      if (commentText !== "") {
        var commentElement = document.createElement("div");
        commentElement.className = "comment";

        var avatarElement = document.createElement("div");
        avatarElement.className = "user-avatar";
        commentElement.appendChild(avatarElement);

        var commentContent = document.createElement("div");
        commentContent.className = "comment-content";

        var nameElement = document.createElement("div");
        nameElement.className = "user-name";
        nameElement.textContent = "Анон";
        commentContent.appendChild(nameElement);

        var commentTextElement = document.createElement("p");
        commentTextElement.className = "comment-text";
        commentTextElement.textContent = commentText;
        commentContent.appendChild(commentTextElement);

        commentElement.appendChild(commentContent);
        var replyForm = document.createElement("form");
        replyForm.className = "reply-form";
        var replyInput = document.createElement("textarea");
        replyInput.rows = "2";
        replyInput.cols = "40";
        replyInput.placeholder = "Reply to this comment";
        var replyButton = document.createElement("button");
        replyButton.type = "submit";
        replyButton.textContent = "Ответить";
        replyForm.appendChild(replyInput);
        replyForm.appendChild(replyButton);
        replyForm.addEventListener("submit", handleReply);
        commentElement.appendChild(replyForm);

        var deleteButton = document.createElement("button");
        deleteButton.textContent = "Удалить";
        deleteButton.addEventListener("click", function() {
          commentElement.remove();
        });
        commentElement.appendChild(deleteButton);

        var commentsContainer = document.getElementById("comments");
        commentsContainer.appendChild(commentElement);

        commentInput.value = "";
      }
    }

    var commentForm = document.getElementById("comment-form");
    commentForm.addEventListener("submit", handleSubmit);
  </script>
</body>
</html>